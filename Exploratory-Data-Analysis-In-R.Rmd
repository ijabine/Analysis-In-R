---
title: "Exploratory-Data-Analysis-R"
author: "Illarion Jabine"
date: "11/12/2019"
output:
  word_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Principles of analytic graphics

A picture is worth thousand words, but not all pictures. In order for a picture to convey the message it should satisfy some principles. E.Tufte (2006) describes them in his book "Beautiful Evidence" as principles of analytic graphics, they the folowing basic principles of presenting data effectively according to R.Peng:

1. Show comparisons
2. Show causality, mechanism and explanation
3. Show multivariate data
4. Integrate multiple modes of evidence
5. Describe and document the evidence
6. Content is king



1. Show comparisons

When presenting your findings try to put them into perspective by asking a question "Compared to What?"
A classical example is two boxplots, of which one is of a control group shown next to each other. I will create boxplots for number of cylinders in mtcars dataset. By see the boxplots side by side, it is clear that 4 cylinder cars are more economical (mpg is higher)

```{r Show comparisons}
boxplot(mpg ~ cyl, data = mtcars)

```

2. Show causality, mechanism and explanation

The graph needs to present the causal framework for the theory of how the data works. It has to demonstrate the (at least try to) the explanations of possible causal framework that might exist in the studied phenomena. For example, by studing mtcars dataset I might claim that the 4 cylinders cars are more efficent due to thier lighter weight:
```{r Show causality, mechanism and explanation}

# miles/gallon vs cylinders and weight vs cylinders boxplots side by side:
par(mfrow = c(1,2))
boxplot(mpg ~ cyl, data = mtcars);boxplot(wt ~ cyl, data = mtcars)

```

Indeed it looks like there is some kind of causal relationship. Perhaps it should be studied further...

3. Show multivariate data (i.e. more than two variables)

By combining several variables on the plot you can avoid being misled and draw an incorrect conclusion. By adding several new dimentions to your plot eitherthrough groupings (faceting), color, size, shape, etc ypu might see some hidden patterns.

```{r Show multivariate data}
library(ggplot2)
qplot(mpg, wt, data = mtcars, facets = . ~ cyl, geom = c("point", "smooth"), method = "lm", main = "Grouping by number of cylinders", xlab = "Miles per gallon", ylab = "Weight")

qplot(mpg, wt, data = mtcars, geom = c("point", "smooth"), method = "lm", xlab = "Miles per gallon", ylab = "Weight")
```


4. Integrate multiple modes of evidence

You data graphic should tell the story by using many modes of data presentation including images, diagrams, words and numbers. All of them should be naturally integrated without creating a clutter, but helping to convey the message in a clear way.


5. Describe and document the evidence

R. Peng argues that a good analytic graphics has to describe and document the evidence with appropriate labels, scales, sources, etc. That means all the axes need to have names, a legend, title etc need to be present. All these elements can be controlled in ggplot2.

6. Content is king

Content comes first and only after the for (nice fonts, colors, etc)


## Types of exploratory data analysis

Exploratory graphs are widely used in exploratory data analysis. There are many purposes of the exploratory graphs. They are used to understand data properties, possibly find some patterns in data and as a result suggest modeling approaches. Eventually they can serve as one of the means to communicate results.
Broadly speaking exploratory graphs can be simple one dimension and 2 or more dimension.

* One dimension:
- Five-number summary
- Boxplots
- Histograms
- Density plot
- Barplot

- Five-number summary :
* summary() - a generic function (to list all available methods for a generic function type: methods(summary))
* skim() from skimr package
* describe() from psych package
* Desc() from DescTools (Tools for Descriptive Statistics) package. this function produces summaries of various types of variables. The appropriate statistics are chosen depending on the class of x. The general intention is to simplify the description process for lazy typers and return a quick, but rich summary.

```{r Five-number summary}
library(skimr)
library(psych)
library(DescTools)

summary(mtcars)

skim(mtcars)

describe(mtcars)

Desc(mtcars)
```

- Boxplots

```{r Boxplots, echo=TRUE, message=FALSE, warning=FALSE}
attach(diamonds)

# Simple boxplot

boxplot(carat, col = "blue")
title("Simple boxplot")

# boxplots split by cut using standard boxplot() function:

boxplot(carat ~ cut)

# boxplot using ggplot2:
library(ggplot2)

ggplot(diamonds) +
 aes(x = cut, y = carat) +
 geom_boxplot(fill = "#0c4c8a") +
 theme_minimal()


ggplot(diamonds) +
 aes(x = cut, y = carat, fill = clarity) +
 geom_boxplot() +
 scale_fill_hue() +
 labs(title = "Boxplot with clarity as fill") +
 theme_minimal()

ggplot(diamonds) +
 aes(x = cut, y = carat) +
 geom_boxplot(fill = "#0c4c8a") +
 labs(title = "Boxplot with clarity as facet") +
 theme_minimal() +
 facet_wrap(clarity)

```

- Histogram and Density plot

```{r histograms, echo=TRUE, message=FALSE, warning=FALSE}

# using standard function hist(), we also calculate and show with a red line the median:

hist(carat, breaks = 20, density = 10, angle = 45, col = "blue")
rug(carat)
abline(v = median(carat), col = "red", lwd = 3)

# using ggplot2:

# we strore the histogram in hst object:
hst <- diamonds %>% ggplot(aes(x = carat)) +
 geom_histogram(bins = 30, fill = "blue") +
 theme_classic()
# to print the histogram just type hst and enter
hst

# we can add additional layers to the histogram, for example a title: 
hst <- hst + labs(title = "Carat distribution")

# Density plots

d <- density(carat)
plot(d)

ggplot(diamonds) +
 aes(x = carat) +
 geom_density(adjust = 1L, fill = "#c6dbef") +
 theme_minimal()
```

